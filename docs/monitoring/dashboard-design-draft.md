# Monitoring Dashboard Design Draft

**Sprint:** Phase 4 – Sprint 1  
**Authors:** Monitoring Team, Architecture Council  
**Date:** 2025-10-17

## Objectives

1. Provide real-time visibility into workflow execution metrics.
2. Surface actionable alerts from `WorkflowEventTelemetry` and repository-backed
   state.
3. Offer historical context for quality, build, and dependency trends.

## Proposed Views

### 1. Workflow Command Center

- **Live Event Stream:** feed sourced from `/ws/metrics/live` showing the latest
  `workflow.started/completed/failed` events with metadata (workflow ID,
  duration, triggering agent).
- **Throughput Gauges:** real-time calculations of events-per-minute paired with
  success/failure ratios. derived from telemetry counters.
- **Active Workflows Table:** consolidated list of in-flight workflows, last
  heartbeat, and owning agent. hooks into `WorkflowEventBus`.

### 2. Quality Intelligence Panel

- **Coverage Trend:** sparkline sourced from `QualityBaselineRepository` with
  ratchet target overlays; highlights regressions beyond ±2% thresholds.
- **Anomaly Radar:** displays `QualityIntelligenceService` anomalies grouped by
  severity, with quick links to recommended remediation.
- **Recommendations Feed:** prioritized actions generated by the AI assistants,
  filtered by project scope or agent.

### 3. Dependency & Security Tracker

- **Vulnerability Heatmap:** summary of high/medium/low vulnerabilities detected
  by `DependencyMonitorService`, with export to CSV for compliance reporting.
- **Major Update Watchlist:** table enumerating packages with available major
  releases, last notification timestamp, and acknowledgement status.
- **Scan Activity Timeline:** timeline of dependency scans across projects,
  enabling detection of stale or failing audits.

## Technical Notes

- **Data Sources:** telemetry endpoints (`WorkflowEventTelemetry`), SQLite state
  (`QualityBaselineRepository`, `DependencyMonitorRepository`), and ACB cache
  adapters.
- **Update Cadence:** live views refresh every 2 seconds via WebSocket; trend
  graphs refresh every 60 seconds via REST to minimize load.
- **Persistence:** hourly rollups persisted by a scheduled task so dashboards
  remain responsive after server restarts.

## Next Steps

1. ~~Implement JSON response schemas for `/monitoring/events` and `/monitoring/health`~~ ✅ Live via `TelemetryResponseModel` / `HealthResponseModel`.
2. Build React (or static HTML prototype) widgets based on the above views.
3. Run UX review with stakeholders before Sprint 2 implementation.
4. Automate publishing of coverage and dependency snapshots after each workflow
   completion event.
